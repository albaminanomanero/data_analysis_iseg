#!/bin/bash
set -ex

# Install Jupyter and Python manually (needed for nbgitpuller)
sudo apt-get update
sudo apt-get install -y python3-pip
pip3 install notebook jupyterlab nbgitpuller

# Install R packages (optional if using install.R instead)
Rscript -e "install.packages('readr', repos='https://cloud.r-project.org')"
Rscript -e "install.packages('tidyverse', repos='https://cloud.r-project.org')"
Rscript -e "install.packages('IRkernel', repos='https://cloud.r-project.org')"
Rscript -e "IRkernel::installspec(user = FALSE)"

# Enable nbgitpuller
jupyter serverextension enable --py nbgitpuller --sys-prefix
